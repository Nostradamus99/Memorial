<!DOCTYPE html>
<html lang="fr">

<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width">
  <title>Memorial</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css2?family=Figtree:wght@300;400;600&family=Dancing+Script:wght@400;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="assets/css/style.css">
</head>

<body>
  <header class="header">
    <div class="nav-container">
     <a href= "index.html"><h1 class="logo">Memorial</h1></a>
       <div class="nav-actions">
            <a href="memoriaux.html">M√©moriaux</a>
            <a href="auth.html">S'inscrire/Connexion</a>
            <a href="profil.html">Profil</a>
            <a href="creer-memorial.html" class="btn-primary">Cr√©er</a>
       </div>
    </div>
  </header>

<body>
    <!-- EN-T√äTE -->
    <header class="navbar">
        <div class="nav-container">
            <div class="nav-logo">
                <a href="index.html">Memorial</a>
            </div>
            <nav class="nav-menu">
                <a href="memoriaux.html">M√©moriaux</a>
                <a href="mes-memoriaux.html" class="nav-active">Mes m√©moriaux</a>
                <a href="profil.html">Profil</a>
            </nav>
            <div class="nav-actions">
                <div class="user-dropdown">
                    <button class="dropdown-toggle">
                        S'inscrire/Connexion
                        <span class="dropdown-arrow">‚ñº</span>
                    </button>
                    <div class="dropdown-menu">
                        <a href="profil.html">Profil</a>
                        <a href="#" onclick="logout()">D√©connexion</a>
                    </div>
                </div>
                <a href="#" class="nav-button">Accueil</a>
            </div>
        </div>
    </header>

    <!-- BARRE DE RECHERCHE -->
    <section class="search-section">
        <div class="container">
            <div class="search-bar">
                <input type="text" placeholder="Rechercher dans mes m√©moriaux..." class="search-input">
                <button class="search-btn">üîç</button>
            </div>
            <div class="page-actions">
                <a href="creer-memorial.html" class="btn btn-primary">
                    <span class="btn-icon">‚ûï</span>
                    Cr√©er un m√©morial
                </a>
                <div class="view-options">
                    <button class="view-btn active" data-view="grid">‚äû</button>
                    <button class="view-btn" data-view="list">‚ò∞</button>
                </div>
            </div>
        </div>
    </section>

    <!-- CONTENU PRINCIPAL -->
    <main class="main-content">
        <div class="container">
            <!-- TITRE DE LA SECTION -->
            <div class="page-header">
                <h1>Mes m√©moriaux</h1>
                <p class="page-subtitle">G√©rez et consultez tous vos m√©moriaux cr√©√©s</p>
            </div>

            <!-- FILTRES -->
            <div class="memorial-filters">
                <div class="filter-tabs">
                    <button class="filter-tab active" data-filter="all">
                        Tous <span class="count">(3)</span>
                    </button>
                    <button class="filter-tab" data-filter="published">
                        Publi√©s <span class="count">(2)</span>
                    </button>
                    <button class="filter-tab" data-filter="draft">
                        Brouillons <span class="count">(1)</span>
                    </button>
                    <button class="filter-tab" data-filter="private">
                        Priv√©s <span class="count">(1)</span>
                    </button>
                </div>
                <div class="sort-options">
                    <select class="sort-select">
                        <option value="recent">Plus r√©cents</option>
                        <option value="oldest">Plus anciens</option>
                        <option value="name">Par nom</option>
                        <option value="visits">Par visites</option>
                    </select>
                </div>
            </div>

            <!-- LISTE DES M√âMORIAUX -->
            <div class="memorials-grid" id="memorials-container">
                
                <!-- M√âMORIAL 1 - Publi√© -->
                <div class="memorial-card published" data-status="published">
                    <div class="memorial-header">
                        <div class="memorial-photo">
                            <img src="https://via.placeholder.com/120x120/cccccc/666666?text=Photo" alt="Jean Dupont">
                            <div class="status-badge published">Publi√©</div>
                        </div>
                        <div class="memorial-info">
                            <h3 class="memorial-name">Jean Dupont</h3>
                            <p class="memorial-dates">15 mars 1950 - 12 janvier 2024</p>
                            <p class="memorial-description">P√®re aimant, mari d√©vou√© et ami fid√®le</p>
                            <div class="memorial-stats">
                                <span class="stat">üëÅÔ∏è 245 vues</span>
                                <span class="stat">üí¨ 12 messages</span>
                                <span class="stat">üì∑ 8 photos</span>
                            </div>
                        </div>
                        <div class="memorial-actions">
                            <button class="action-btn dropdown-trigger" onclick="toggleDropdown(this)">
                                ‚ãÆ
                            </button>
                            <div class="action-dropdown">
                                <a href="#" onclick="viewMemorial(1)">üëÅÔ∏è Voir</a>
                                <a href="#" onclick="editMemorial(1)">‚úèÔ∏è Modifier</a>
                                <a href="#" onclick="shareMemorial(1)">üì§ Partager</a>
                                <a href="#" onclick="duplicateMemorial(1)">üìÑ Dupliquer</a>
                                <hr>
                                <a href="#" onclick="deleteMemorial(1)" class="danger">üóëÔ∏è Supprimer</a>
                            </div>
                        </div>
                    </div>

                    <!-- ACTIONS RAPIDES -->
                    <div class="memorial-quick-actions">
                        <button class="quick-action" onclick="addTribute(1)">
                            <span class="action-icon">‚úçÔ∏è</span>
                            <span class="action-text">Ajouter hommage</span>
                        </button>
                        <button class="quick-action" onclick="addPhoto(1)">
                            <span class="action-icon">üì∑</span>
                            <span class="action-text">Ajouter photo</span>
                        </button>
                        <button class="quick-action" onclick="shareToFamily(1)">
                            <span class="action-icon">üë•</span>
                            <span class="action-text">Partager aux proches</span>
                        </button>
                        <button class="quick-action" onclick="manageMemories(1)">
                            <span class="action-icon">üíù</span>
                            <span class="action-text">G√©rer souvenirs</span>
                        </button>
                    </div>

                    <!-- APER√áU DES DERNI√àRES ACTIVIT√âS -->
                    <div class="memorial-activity">
                        <h4>Derni√®res activit√©s</h4>
                        <div class="activity-list">
                            <div class="activity-item">
                                <span class="activity-icon">üí¨</span>
                                <span class="activity-text">Marie L. a laiss√© un message</span>
                                <span class="activity-time">Il y a 2h</span>
                            </div>
                            <div class="activity-item">
                                <span class="activity-icon">üì∑</span>
                                <span class="activity-text">Photo ajout√©e par Pierre D.</span>
                                <span class="activity-time">Hier</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- M√âMORIAL 2 - Brouillon -->
                <div class="memorial-card draft" data-status="draft">
                    <div class="memorial-header">
                        <div class="memorial-photo">
                            <img src="https://via.placeholder.com/120x120/cccccc/666666?text=Photo" alt="Marie Martin">
                            <div class="status-badge draft">Brouillon</div>
                        </div>
                        <div class="memorial-info">
                            <h3 class="memorial-name">Marie Martin</h3>
                            <p class="memorial-dates">22 juin 1945 - 8 f√©vrier 2024</p>
                            <p class="memorial-description">M√©morial en cours de cr√©ation...</p>
                            <div class="memorial-stats">
                                <span class="stat incomplete">‚ùå Non publi√©</span>
                                <span class="stat">üìù Brouillon sauvegard√©</span>
                            </div>
                        </div>
                        <div class="memorial-actions">
                            <button class="action-btn dropdown-trigger" onclick="toggleDropdown(this)">
                                ‚ãÆ
                            </button>
                            <div class="action-dropdown">
                                <a href="creer-memorial.html?edit=2">‚úèÔ∏è Continuer</a>
                                <a href="#" onclick="previewDraft(2)">üëÅÔ∏è Aper√ßu</a>
                                <a href="#" onclick="publishDraft(2)">üåü Publier</a>
                                <hr>
                                <a href="#" onclick="deleteDraft(2)" class="danger">üóëÔ∏è Supprimer</a>
                            </div>
                        </div>
                    </div>

                    <div class="draft-actions">
                        <a href="creer-memorial.html?edit=2" class="btn btn-primary">
                            Continuer la cr√©ation
                        </a>
                        <button class="btn btn-outline" onclick="publishDraft(2)">
                            Publier maintenant
                        </button>
                    </div>
                </div>

                <!-- M√âMORIAL 3 - Priv√© -->
                <div class="memorial-card private" data-status="private">
                    <div class="memorial-header">
                        <div class="memorial-photo">
                            <img src="https://via.placeholder.com/120x120/cccccc/666666?text=Photo" alt="Robert Durand">
                            <div class="status-badge private">Priv√©</div>
                        </div>
                        <div class="memorial-info">
                            <h3 class="memorial-name">Robert Durand</h3>
                            <p class="memorial-dates">10 novembre 1940 - 25 d√©cembre 2023</p>
                            <p class="memorial-description">Visible uniquement par la famille</p>
                            <div class="memorial-stats">
                                <span class="stat">üë• 5 personnes autoris√©es</span>
                                <span class="stat">üí¨ 8 messages</span>
                            </div>
                        </div>
                        <div class="memorial-actions">
                            <button class="action-btn dropdown-trigger" onclick="toggleDropdown(this)">
                                ‚ãÆ
                            </button>
                            <div class="action-dropdown">
                                <a href="#" onclick="viewMemorial(3)">üëÅÔ∏è Voir</a>
                                <a href="#" onclick="editMemorial(3)">‚úèÔ∏è Modifier</a>
                                <a href="#" onclick="managePrivacy(3)">üîí G√©rer l'acc√®s</a>
                                <a href="#" onclick="makePublic(3)">üåç Rendre public</a>
                                <hr>
                                <a href="#" onclick="deleteMemorial(3)" class="danger">üóëÔ∏è Supprimer</a>
                            </div>
                        </div>
                    </div>

                    <div class="memorial-quick-actions">
                        <button class="quick-action" onclick="manageAccess(3)">
                            <span class="action-icon">üîë</span>
                            <span class="action-text">G√©rer les acc√®s</span>
                        </button>
                        <button class="quick-action" onclick="inviteFamily(3)">
                            <span class="action-icon">‚úâÔ∏è</span>
                            <span class="action-text">Inviter famille</span>
                        </button>
                        <button class="quick-action" onclick="addPhoto(3)">
                            <span class="action-icon">üì∑</span>
                            <span class="action-text">Ajouter photo</span>
                        </button>
                    </div>
                </div>
            </div>

            <!-- MESSAGE SI AUCUN M√âMORIAL -->
            <div class="empty-state" id="empty-state" style="display: none;">
                <div class="empty-icon">üïØÔ∏è</div>
                <h2>Aucun m√©morial trouv√©</h2>
                <p>Vous n'avez pas encore cr√©√© de m√©morial.</p>
                <a href="creer-memorial.html" class="btn btn-primary">
                    Cr√©er votre premier m√©morial
                </a>
            </div>
        </div>
    </main>

    <!-- PIED DE PAGE -->
    <footer class="main-footer">
        <div class="footer-container">
            <div class="footer-links">
                <div class="footer-section">
                    <h4>Site name</h4>
                </div>
                <div class="footer-section">
                    <h4>Topic</h4>
                    <a href="#" class="footer-link">Page</a>
                    <a href="#" class="footer-link">Page</a>
                    <a href="#" class="footer-link">Page</a>
                </div>
            </div>
            <div class="footer-social">
                <div class="social-links">
                    <a href="#" aria-label="Facebook">üìò</a>
                    <a href="#" aria-label="LinkedIn">üíº</a>
                    <a href="#" aria-label="YouTube">üì∫</a>
                    <a href="#" aria-label="Instagram">üì∑</a>
                </div>
            </div>
        </div>
    </footer>

    <!-- MODALES -->
    
    <!-- Modal Partage aux proches -->
    <div id="share-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Partager aux proches</h3>
                <button class="modal-close" onclick="closeModal('share-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="share-options">
                    <div class="share-method">
                        <h4>üìß Par email</h4>
                        <textarea placeholder="Entrez les emails s√©par√©s par des virgules"></textarea>
                        <button class="btn btn-primary">Envoyer invitations</button>
                    </div>
                    <div class="share-method">
                        <h4>üîó Lien de partage</h4>
                        <div class="link-share">
                            <input type="text" value="https://memorial.com/jean-dupont" readonly>
                            <button class="btn btn-outline" onclick="copyLink()">Copier</button>
                        </div>
                    </div>
                    <div class="share-method">
                        <h4>üì± R√©seaux sociaux</h4>
                        <div class="social-share">
                            <button class="social-btn facebook">Facebook</button>
                            <button class="social-btn whatsapp">WhatsApp</button>
                            <button class="social-btn telegram">Telegram</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Modal Ajout Photo -->
    <div id="photo-modal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h3>Ajouter des photos</h3>
                <button class="modal-close" onclick="closeModal('photo-modal')">&times;</button>
            </div>
            <div class="modal-body">
                <div class="upload-zone">
                    <input type="file" id="photo-upload" multiple accept="image/*" style="display: none;">
                    <div class="upload-area" onclick="document.getElementById('photo-upload').click()">
                        <div class="upload-icon">üì∑</div>
                        <p>Cliquez pour s√©lectionner des photos</p>
                        <p class="upload-hint">ou glissez-d√©posez vos images ici</p>
                    </div>
                </div>
                <div class="upload-actions">
                    <button class="btn btn-primary">T√©l√©charger photos</button>
                    <button class="btn btn-outline">Annuler</button>
                </div>
            </div>
        </div>
    </div>

    <!-- SCRIPTS -->
    <script>
        // === FONCTIONS PRINCIPALES ===

        // Gestion des dropdowns d'actions
        function toggleDropdown(button) {
            const dropdown = button.nextElementSibling;
            const isOpen = dropdown.style.display === 'block';
            
            // Fermer tous les autres dropdowns
            document.querySelectorAll('.action-dropdown').forEach(d => d.style.display = 'none');
            
            // Basculer le dropdown actuel
            dropdown.style.display = isOpen ? 'none' : 'block';
        }

        // Fermer les dropdowns en cliquant ailleurs
        document.addEventListener('click', function(e) {
            if (!e.target.matches('.dropdown-trigger') && !e.target.matches('.action-btn')) {
                document.querySelectorAll('.action-dropdown').forEach(d => d.style.display = 'none');
            }
        });

        // === ACTIONS SUR LES M√âMORIAUX ===

        function viewMemorial(id) {
            window.open(`memorial-view.html?id=${id}`, '_blank');
        }

        function editMemorial(id) {
            window.location.href = `creer-memorial.html?edit=${id}`;
        }

        function deleteMemorial(id) {
            if (confirm('√ätes-vous s√ªr de vouloir supprimer ce m√©morial ? Cette action est irr√©versible.')) {
                // Animation de suppression
                const card = event.target.closest('.memorial-card');
                card.style.transition = 'all 0.3s ease';
                card.style.transform = 'translateX(-100%)';
                card.style.opacity = '0';
                
                setTimeout(() => {
                    card.remove();
                    updateCounts();
                }, 300);
            }
        }

        // === ACTIONS RAPIDES ===

        function addTribute(id) {
            const tribute = prompt('√âcrivez votre hommage :');
            if (tribute) {
                alert('Hommage ajout√© avec succ√®s !');
                // Ici on ajouterait la logique de sauvegarde
            }
        }

        function addPhoto(id) {
            document.getElementById('photo-modal').style.display = 'block';
        }

        function shareToFamily(id) {
            document.getElementById('share-modal').style.display = 'block';
        }

        function manageMemories(id) {
            window.location.href = `memorial-memories.html?id=${id}`;
        }

        // === FONCTIONS POUR LES BROUILLONS ===

        function publishDraft(id) {
            if (confirm('√ätes-vous s√ªr de vouloir publier ce m√©morial ?')) {
                const card = document.querySelector(`[data-status="draft"]`);
                const badge = card.querySelector('.status-badge');
                
                // Changer le statut
                card.dataset.status = 'published';
                card.className = 'memorial-card published';
                badge.textContent = 'Publi√©';
                badge.className = 'status-badge published';
                
                // Mise √† jour des stats
                const stats = card.querySelector('.memorial-stats');
                stats.innerHTML = `
                    <span class="stat">üëÅÔ∏è 0 vues</span>
                    <span class="stat">üí¨ 0 messages</span>
                    <span class="stat">üì∑ 0 photos</span>
                `;
                
                // Ajouter les actions rapides
                const quickActions = document.createElement('div');
                quickActions.className = 'memorial-quick-actions';
                quickActions.innerHTML = `
                    <button class="quick-action" onclick="addTribute(${id})">
                        <span class="action-icon">‚úçÔ∏è</span>
                        <span class="action-text">Ajouter hommage</span>
                    </button>
                    <button class="quick-action" onclick="addPhoto(${id})">
                        <span class="action-icon">üì∑</span>
                        <span class="action-text">Ajouter photo</span>
                    </button>
                    <button class="quick-action" onclick="shareToFamily(${id})">
                        <span class="action-icon">üë•</span>
                        <span class="action-text">Partager aux proches</span>
                    </button>
                `;
                
                card.appendChild(quickActions);
                
                alert('M√©morial publi√© avec succ√®s !');
                updateCounts();
            }
        }

        // === GESTION DES FILTRES ===

        document.querySelectorAll('.filter-tab').forEach(tab => {
            tab.addEventListener('click', function() {
                // Mettre √† jour l'onglet actif
                document.querySelectorAll('.filter-tab').forEach(t => t.classList.remove('active'));
                this.classList.add('active');
                
                // Filtrer les cartes
                const filter = this.dataset.filter;
                const cards = document.querySelectorAll('.memorial-card');
                
                cards.forEach(card => {
                    if (filter === 'all' || card.dataset.status === filter) {
                        card.style.display = 'block';
                    } else {
                        card.style.display = 'none';
                    }
                });
            });
        });

        // === GESTION DES MODALES ===

        function closeModal(modalId) {
            document.getElementById(modalId).style.display = 'none';
        }

        function copyLink() {
            const linkInput = document.querySelector('.link-share input');
            linkInput.select();
            document.execCommand('copy');
            alert('Lien copi√© dans le presse-papiers !');
        }

        // === FONCTIONS UTILITAIRES ===

        function updateCounts() {
            const published = document.querySelectorAll('[data-status="published"]').length;
            const draft = document.querySelectorAll('[data-status="draft"]').length;
            const private = document.querySelectorAll('[data-status="private"]').length;
            const total = published + draft + private;
            
            document.querySelector('[data-filter="all"] .count').textContent = `(${total})`;
            document.querySelector('[data-filter="published"] .count').textContent = `(${published})`;
            document.querySelector('[data-filter="draft"] .count').textContent = `(${draft})`;
            document.querySelector('[data-filter="private"] .count').textContent = `(${private})`;
        }

        // === GESTION DES VUES ===
        document.querySelectorAll('.view-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                document.querySelectorAll('.view-btn').forEach(b => b.classList.remove('active'));
                this.classList.add('active');
                
                const view = this.dataset.view;
                const container = document.getElementById('memorials-container');
                
                if (view === 'list') {
                    container.classList.add('list-view');
                } else {
                    container.classList.remove('list-view');
                }
            });
        });

        // === INITIALISATION ===
        document.addEventListener('DOMContentLoaded', function() {
            updateCounts();
            
            // Gestion du drag & drop pour les photos
            const uploadArea = document.querySelector('.upload-area');
            if (uploadArea) {
                uploadArea.addEventListener('dragover', (e) => {
                    e.preventDefault();
                    uploadArea.classList.add('dragover');
                });
                
                uploadArea.addEventListener('dragleave', () => {
                    uploadArea.classList.remove('dragover');
                });
                
                uploadArea.addEventListener('drop', (e) => {
                    e.preventDefault();
                    uploadArea.classList.remove('dragover');
                    // Traiter les fichiers d√©pos√©s
                    const files = e.dataTransfer.files;
                    console.log('Files dropped:', files);
                });
            }
        });
    </script>

</body>
</html>
